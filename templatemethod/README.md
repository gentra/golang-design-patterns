# Introduction

Template Method is a behavioral design pattern that defines the skeleton (template) of an algorithm in the superclass but lets subclasses override specific steps of the algorithm without changing its structure.

[![](https://mermaid.ink/img/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG4gIGNsYXNzIG1haW57XG4gICAgbWFpbigpXG4gIH1cblxuICBjbGFzcyBTYWxlc1JlcG9ydGVyQWN0aXZpdHkge1xuICAgIDw8aW50ZXJmYWNlPj5cbiAgICArRmV0Y2hPcmRlckRhdGEoKSAoW11PcmRlciwgZXJyb3IpXG4gICAgK0NvbXBpbGVSZXBvcnQoW11PcmRlcikgKFNhbGVzUmVwb3J0LCBlcnJvcilcbiAgICArU3RvcmVSZXBvcnREYXRhKHJlcG9ydCBTYWxlc1JlcG9ydCkgZXJyb3JcbiAgICArU2VuZFJlcG9ydChyZXBvcnQgU2FsZXNSZXBvcnQpIGVycm9yXG4gIH1cblxuICBjbGFzcyBTYWxlc1JlcG9ydGVySSB7XG4gICAgPDxpbnRlcmZhY2U-PlxuICAgICtSZXBvcnRTYWxlcyhhY3Rpb24gU2FsZXNSZXBvcnRBY3Rpdml0eSkgZXJyb3JcbiAgfVxuXG4gIGNsYXNzIFNhbGVzUmVwb3J0ZXIge1xuICB9XG5cbiAgY2xhc3MgQnVzaW5lc3NEZXZ7XG4gIH1cblxuICBjbGFzcyBGaW5hbmNle1xuICB9XG5cbiAgY2xhc3MgSW52ZXN0b3J7XG4gIH1cblxuICBjbGFzcyBTZWxsZXJ7XG4gIH1cblxuICBTYWxlc1JlcG9ydGVyQWN0aXZpdHk8fC4uQnVzaW5lc3NEZXZcbiAgU2FsZXNSZXBvcnRlckFjdGl2aXR5PHwuLkZpbmFuY2VcbiAgU2FsZXNSZXBvcnRlckFjdGl2aXR5PHwuLkludmVzdG9yXG4gIFNhbGVzUmVwb3J0ZXJBY3Rpdml0eTx8Li5TZWxsZXJcbiAgU2FsZXNSZXBvcnRlckk8fC4uU2FsZXNSZXBvcnRlclxuXG4gIFNhbGVzUmVwb3J0ZXJJLi4-U2FsZXNSZXBvcnRlckFjdGl2aXR5XG5cbiAgbWFpbi4uPlNhbGVzUmVwb3J0ZXIiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCIsInRoZW1lVmFyaWFibGVzIjp7ImJhY2tncm91bmQiOiJ3aGl0ZSIsInByaW1hcnlDb2xvciI6IiNFQ0VDRkYiLCJzZWNvbmRhcnlDb2xvciI6IiNmZmZmZGUiLCJ0ZXJ0aWFyeUNvbG9yIjoiaHNsKDgwLCAxMDAlLCA5Ni4yNzQ1MDk4MDM5JSkiLCJwcmltYXJ5Qm9yZGVyQ29sb3IiOiJoc2woMjQwLCA2MCUsIDg2LjI3NDUwOTgwMzklKSIsInNlY29uZGFyeUJvcmRlckNvbG9yIjoiaHNsKDYwLCA2MCUsIDgzLjUyOTQxMTc2NDclKSIsInRlcnRpYXJ5Qm9yZGVyQ29sb3IiOiJoc2woODAsIDYwJSwgODYuMjc0NTA5ODAzOSUpIiwicHJpbWFyeVRleHRDb2xvciI6IiMxMzEzMDAiLCJzZWNvbmRhcnlUZXh0Q29sb3IiOiIjMDAwMDIxIiwidGVydGlhcnlUZXh0Q29sb3IiOiJyZ2IoOS41MDAwMDAwMDAxLCA5LjUwMDAwMDAwMDEsIDkuNTAwMDAwMDAwMSkiLCJsaW5lQ29sb3IiOiIjMzMzMzMzIiwidGV4dENvbG9yIjoiIzMzMyIsIm1haW5Ca2ciOiIjRUNFQ0ZGIiwic2Vjb25kQmtnIjoiI2ZmZmZkZSIsImJvcmRlcjEiOiIjOTM3MERCIiwiYm9yZGVyMiI6IiNhYWFhMzMiLCJhcnJvd2hlYWRDb2xvciI6IiMzMzMzMzMiLCJmb250RmFtaWx5IjoiXCJ0cmVidWNoZXQgbXNcIiwgdmVyZGFuYSwgYXJpYWwiLCJmb250U2l6ZSI6IjE2cHgiLCJsYWJlbEJhY2tncm91bmQiOiIjZThlOGU4Iiwibm9kZUJrZyI6IiNFQ0VDRkYiLCJub2RlQm9yZGVyIjoiIzkzNzBEQiIsImNsdXN0ZXJCa2ciOiIjZmZmZmRlIiwiY2x1c3RlckJvcmRlciI6IiNhYWFhMzMiLCJkZWZhdWx0TGlua0NvbG9yIjoiIzMzMzMzMyIsInRpdGxlQ29sb3IiOiIjMzMzIiwiZWRnZUxhYmVsQmFja2dyb3VuZCI6IiNlOGU4ZTgiLCJhY3RvckJvcmRlciI6ImhzbCgyNTkuNjI2MTY4MjI0MywgNTkuNzc2NTM2MzEyOCUsIDg3LjkwMTk2MDc4NDMlKSIsImFjdG9yQmtnIjoiI0VDRUNGRiIsImFjdG9yVGV4dENvbG9yIjoiYmxhY2siLCJhY3RvckxpbmVDb2xvciI6ImdyZXkiLCJzaWduYWxDb2xvciI6IiMzMzMiLCJzaWduYWxUZXh0Q29sb3IiOiIjMzMzIiwibGFiZWxCb3hCa2dDb2xvciI6IiNFQ0VDRkYiLCJsYWJlbEJveEJvcmRlckNvbG9yIjoiaHNsKDI1OS42MjYxNjgyMjQzLCA1OS43NzY1MzYzMTI4JSwgODcuOTAxOTYwNzg0MyUpIiwibGFiZWxUZXh0Q29sb3IiOiJibGFjayIsImxvb3BUZXh0Q29sb3IiOiJibGFjayIsIm5vdGVCb3JkZXJDb2xvciI6IiNhYWFhMzMiLCJub3RlQmtnQ29sb3IiOiIjZmZmNWFkIiwibm90ZVRleHRDb2xvciI6ImJsYWNrIiwiYWN0aXZhdGlvbkJvcmRlckNvbG9yIjoiIzY2NiIsImFjdGl2YXRpb25Ca2dDb2xvciI6IiNmNGY0ZjQiLCJzZXF1ZW5jZU51bWJlckNvbG9yIjoid2hpdGUiLCJzZWN0aW9uQmtnQ29sb3IiOiJyZ2JhKDEwMiwgMTAyLCAyNTUsIDAuNDkpIiwiYWx0U2VjdGlvbkJrZ0NvbG9yIjoid2hpdGUiLCJzZWN0aW9uQmtnQ29sb3IyIjoiI2ZmZjQwMCIsInRhc2tCb3JkZXJDb2xvciI6IiM1MzRmYmMiLCJ0YXNrQmtnQ29sb3IiOiIjOGE5MGRkIiwidGFza1RleHRMaWdodENvbG9yIjoid2hpdGUiLCJ0YXNrVGV4dENvbG9yIjoid2hpdGUiLCJ0YXNrVGV4dERhcmtDb2xvciI6ImJsYWNrIiwidGFza1RleHRPdXRzaWRlQ29sb3IiOiJibGFjayIsInRhc2tUZXh0Q2xpY2thYmxlQ29sb3IiOiIjMDAzMTYzIiwiYWN0aXZlVGFza0JvcmRlckNvbG9yIjoiIzUzNGZiYyIsImFjdGl2ZVRhc2tCa2dDb2xvciI6IiNiZmM3ZmYiLCJncmlkQ29sb3IiOiJsaWdodGdyZXkiLCJkb25lVGFza0JrZ0NvbG9yIjoibGlnaHRncmV5IiwiZG9uZVRhc2tCb3JkZXJDb2xvciI6ImdyZXkiLCJjcml0Qm9yZGVyQ29sb3IiOiIjZmY4ODg4IiwiY3JpdEJrZ0NvbG9yIjoicmVkIiwidG9kYXlMaW5lQ29sb3IiOiJyZWQiLCJsYWJlbENvbG9yIjoiYmxhY2siLCJlcnJvckJrZ0NvbG9yIjoiIzU1MjIyMiIsImVycm9yVGV4dENvbG9yIjoiIzU1MjIyMiIsImNsYXNzVGV4dCI6IiMxMzEzMDAiLCJmaWxsVHlwZTAiOiIjRUNFQ0ZGIiwiZmlsbFR5cGUxIjoiI2ZmZmZkZSIsImZpbGxUeXBlMiI6ImhzbCgzMDQsIDEwMCUsIDk2LjI3NDUwOTgwMzklKSIsImZpbGxUeXBlMyI6ImhzbCgxMjQsIDEwMCUsIDkzLjUyOTQxMTc2NDclKSIsImZpbGxUeXBlNCI6ImhzbCgxNzYsIDEwMCUsIDk2LjI3NDUwOTgwMzklKSIsImZpbGxUeXBlNSI6ImhzbCgtNCwgMTAwJSwgOTMuNTI5NDExNzY0NyUpIiwiZmlsbFR5cGU2IjoiaHNsKDgsIDEwMCUsIDk2LjI3NDUwOTgwMzklKSIsImZpbGxUeXBlNyI6ImhzbCgxODgsIDEwMCUsIDkzLjUyOTQxMTc2NDclKSJ9fSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG4gIGNsYXNzIG1haW57XG4gICAgbWFpbigpXG4gIH1cblxuICBjbGFzcyBTYWxlc1JlcG9ydGVyQWN0aXZpdHkge1xuICAgIDw8aW50ZXJmYWNlPj5cbiAgICArRmV0Y2hPcmRlckRhdGEoKSAoW11PcmRlciwgZXJyb3IpXG4gICAgK0NvbXBpbGVSZXBvcnQoW11PcmRlcikgKFNhbGVzUmVwb3J0LCBlcnJvcilcbiAgICArU3RvcmVSZXBvcnREYXRhKHJlcG9ydCBTYWxlc1JlcG9ydCkgZXJyb3JcbiAgICArU2VuZFJlcG9ydChyZXBvcnQgU2FsZXNSZXBvcnQpIGVycm9yXG4gIH1cblxuICBjbGFzcyBTYWxlc1JlcG9ydGVySSB7XG4gICAgPDxpbnRlcmZhY2U-PlxuICAgICtSZXBvcnRTYWxlcyhhY3Rpb24gU2FsZXNSZXBvcnRBY3Rpdml0eSkgZXJyb3JcbiAgfVxuXG4gIGNsYXNzIFNhbGVzUmVwb3J0ZXIge1xuICB9XG5cbiAgY2xhc3MgQnVzaW5lc3NEZXZ7XG4gIH1cblxuICBjbGFzcyBGaW5hbmNle1xuICB9XG5cbiAgY2xhc3MgSW52ZXN0b3J7XG4gIH1cblxuICBjbGFzcyBTZWxsZXJ7XG4gIH1cblxuICBTYWxlc1JlcG9ydGVyQWN0aXZpdHk8fC4uQnVzaW5lc3NEZXZcbiAgU2FsZXNSZXBvcnRlckFjdGl2aXR5PHwuLkZpbmFuY2VcbiAgU2FsZXNSZXBvcnRlckFjdGl2aXR5PHwuLkludmVzdG9yXG4gIFNhbGVzUmVwb3J0ZXJBY3Rpdml0eTx8Li5TZWxsZXJcbiAgU2FsZXNSZXBvcnRlckk8fC4uU2FsZXNSZXBvcnRlclxuXG4gIFNhbGVzUmVwb3J0ZXJJLi4-U2FsZXNSZXBvcnRlckFjdGl2aXR5XG5cbiAgbWFpbi4uPlNhbGVzUmVwb3J0ZXIiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCIsInRoZW1lVmFyaWFibGVzIjp7ImJhY2tncm91bmQiOiJ3aGl0ZSIsInByaW1hcnlDb2xvciI6IiNFQ0VDRkYiLCJzZWNvbmRhcnlDb2xvciI6IiNmZmZmZGUiLCJ0ZXJ0aWFyeUNvbG9yIjoiaHNsKDgwLCAxMDAlLCA5Ni4yNzQ1MDk4MDM5JSkiLCJwcmltYXJ5Qm9yZGVyQ29sb3IiOiJoc2woMjQwLCA2MCUsIDg2LjI3NDUwOTgwMzklKSIsInNlY29uZGFyeUJvcmRlckNvbG9yIjoiaHNsKDYwLCA2MCUsIDgzLjUyOTQxMTc2NDclKSIsInRlcnRpYXJ5Qm9yZGVyQ29sb3IiOiJoc2woODAsIDYwJSwgODYuMjc0NTA5ODAzOSUpIiwicHJpbWFyeVRleHRDb2xvciI6IiMxMzEzMDAiLCJzZWNvbmRhcnlUZXh0Q29sb3IiOiIjMDAwMDIxIiwidGVydGlhcnlUZXh0Q29sb3IiOiJyZ2IoOS41MDAwMDAwMDAxLCA5LjUwMDAwMDAwMDEsIDkuNTAwMDAwMDAwMSkiLCJsaW5lQ29sb3IiOiIjMzMzMzMzIiwidGV4dENvbG9yIjoiIzMzMyIsIm1haW5Ca2ciOiIjRUNFQ0ZGIiwic2Vjb25kQmtnIjoiI2ZmZmZkZSIsImJvcmRlcjEiOiIjOTM3MERCIiwiYm9yZGVyMiI6IiNhYWFhMzMiLCJhcnJvd2hlYWRDb2xvciI6IiMzMzMzMzMiLCJmb250RmFtaWx5IjoiXCJ0cmVidWNoZXQgbXNcIiwgdmVyZGFuYSwgYXJpYWwiLCJmb250U2l6ZSI6IjE2cHgiLCJsYWJlbEJhY2tncm91bmQiOiIjZThlOGU4Iiwibm9kZUJrZyI6IiNFQ0VDRkYiLCJub2RlQm9yZGVyIjoiIzkzNzBEQiIsImNsdXN0ZXJCa2ciOiIjZmZmZmRlIiwiY2x1c3RlckJvcmRlciI6IiNhYWFhMzMiLCJkZWZhdWx0TGlua0NvbG9yIjoiIzMzMzMzMyIsInRpdGxlQ29sb3IiOiIjMzMzIiwiZWRnZUxhYmVsQmFja2dyb3VuZCI6IiNlOGU4ZTgiLCJhY3RvckJvcmRlciI6ImhzbCgyNTkuNjI2MTY4MjI0MywgNTkuNzc2NTM2MzEyOCUsIDg3LjkwMTk2MDc4NDMlKSIsImFjdG9yQmtnIjoiI0VDRUNGRiIsImFjdG9yVGV4dENvbG9yIjoiYmxhY2siLCJhY3RvckxpbmVDb2xvciI6ImdyZXkiLCJzaWduYWxDb2xvciI6IiMzMzMiLCJzaWduYWxUZXh0Q29sb3IiOiIjMzMzIiwibGFiZWxCb3hCa2dDb2xvciI6IiNFQ0VDRkYiLCJsYWJlbEJveEJvcmRlckNvbG9yIjoiaHNsKDI1OS42MjYxNjgyMjQzLCA1OS43NzY1MzYzMTI4JSwgODcuOTAxOTYwNzg0MyUpIiwibGFiZWxUZXh0Q29sb3IiOiJibGFjayIsImxvb3BUZXh0Q29sb3IiOiJibGFjayIsIm5vdGVCb3JkZXJDb2xvciI6IiNhYWFhMzMiLCJub3RlQmtnQ29sb3IiOiIjZmZmNWFkIiwibm90ZVRleHRDb2xvciI6ImJsYWNrIiwiYWN0aXZhdGlvbkJvcmRlckNvbG9yIjoiIzY2NiIsImFjdGl2YXRpb25Ca2dDb2xvciI6IiNmNGY0ZjQiLCJzZXF1ZW5jZU51bWJlckNvbG9yIjoid2hpdGUiLCJzZWN0aW9uQmtnQ29sb3IiOiJyZ2JhKDEwMiwgMTAyLCAyNTUsIDAuNDkpIiwiYWx0U2VjdGlvbkJrZ0NvbG9yIjoid2hpdGUiLCJzZWN0aW9uQmtnQ29sb3IyIjoiI2ZmZjQwMCIsInRhc2tCb3JkZXJDb2xvciI6IiM1MzRmYmMiLCJ0YXNrQmtnQ29sb3IiOiIjOGE5MGRkIiwidGFza1RleHRMaWdodENvbG9yIjoid2hpdGUiLCJ0YXNrVGV4dENvbG9yIjoid2hpdGUiLCJ0YXNrVGV4dERhcmtDb2xvciI6ImJsYWNrIiwidGFza1RleHRPdXRzaWRlQ29sb3IiOiJibGFjayIsInRhc2tUZXh0Q2xpY2thYmxlQ29sb3IiOiIjMDAzMTYzIiwiYWN0aXZlVGFza0JvcmRlckNvbG9yIjoiIzUzNGZiYyIsImFjdGl2ZVRhc2tCa2dDb2xvciI6IiNiZmM3ZmYiLCJncmlkQ29sb3IiOiJsaWdodGdyZXkiLCJkb25lVGFza0JrZ0NvbG9yIjoibGlnaHRncmV5IiwiZG9uZVRhc2tCb3JkZXJDb2xvciI6ImdyZXkiLCJjcml0Qm9yZGVyQ29sb3IiOiIjZmY4ODg4IiwiY3JpdEJrZ0NvbG9yIjoicmVkIiwidG9kYXlMaW5lQ29sb3IiOiJyZWQiLCJsYWJlbENvbG9yIjoiYmxhY2siLCJlcnJvckJrZ0NvbG9yIjoiIzU1MjIyMiIsImVycm9yVGV4dENvbG9yIjoiIzU1MjIyMiIsImNsYXNzVGV4dCI6IiMxMzEzMDAiLCJmaWxsVHlwZTAiOiIjRUNFQ0ZGIiwiZmlsbFR5cGUxIjoiI2ZmZmZkZSIsImZpbGxUeXBlMiI6ImhzbCgzMDQsIDEwMCUsIDk2LjI3NDUwOTgwMzklKSIsImZpbGxUeXBlMyI6ImhzbCgxMjQsIDEwMCUsIDkzLjUyOTQxMTc2NDclKSIsImZpbGxUeXBlNCI6ImhzbCgxNzYsIDEwMCUsIDk2LjI3NDUwOTgwMzklKSIsImZpbGxUeXBlNSI6ImhzbCgtNCwgMTAwJSwgOTMuNTI5NDExNzY0NyUpIiwiZmlsbFR5cGU2IjoiaHNsKDgsIDEwMCUsIDk2LjI3NDUwOTgwMzklKSIsImZpbGxUeXBlNyI6ImhzbCgxODgsIDEwMCUsIDkzLjUyOTQxMTc2NDclKSJ9fSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)

# Example
## Problem
Suppose we're required to create a sales-report of the transactions for different recipients. Each recipient have
different requirements for storing the data, sending the report, reporting-format, and their data-source.

As engineer, we see a pattern that even though each recipient demand different requirements, the majority of the steps
are the same:
1. Fetching order data
2. Compiling the report
3. Storing the report
4. Sending the report to specified recipients
5. Storing report activity results to our internal-dev monitoring system

Steps 1 to 4 are all different for each recipient, step 5 will always be processed for any recipient.

## Solution
We will compile each unique-steps for recipients as a set of contract that needs to be fulfilled. So we set up this
interface
```go
type SalesReportActivity interface {
	FetchOrderData() ([]entity.Order, error)
	CompileReport([]entity.Order) (entity.SalesReport, error)
	StoreReportData(report entity.SalesReport) error
	SendReport(report entity.SalesReport) error
}
```

For the common steps, we will set up a class that will call `SalesReportActivity` whilst also executing common steps

```go
type SalesReporter interface {
	ReportSales(action SalesReportActivity) error
}
```
```go
func (s *SalesReporter) ReportSales(action internal.SalesReportActivity) error {
	orders, err := action.FetchOrderData()
	if err != nil {
		return err
	}

	report, err := action.CompileReport(orders)
	if err != nil {
		return err
	}

	err = action.StoreReportData(report)
	if err != nil {
		return err
	}

	err = action.SendReport(report)
	if err != nil {
		return err
	}

	log.Println("Storing report activity results to dev-internal monitoring system")

	return nil
}
```
What needs to be done next are just defining each of our recipient detailed-processes:
* [Business-Dev](https://github.com/gentra/golang-design-patterns/blob/master/templatemethod/internal/usecase/salesreportactivity/businessdev.go)
* [Finance](https://github.com/gentra/golang-design-patterns/blob/master/templatemethod/internal/usecase/salesreportactivity/finance.go)
* [Investor](https://github.com/gentra/golang-design-patterns/blob/master/templatemethod/internal/usecase/salesreportactivity/investor.go)
* [Seller](https://github.com/gentra/golang-design-patterns/blob/master/templatemethod/internal/usecase/salesreportactivity/seller.go)

With everything done, what's left is just making a Factory method to select which `SalesReportActivity` we'd want on run-time
```go
func SalesReporterActivity(recipient constant.SalesReportRecipient) internal.SalesReportActivity {
	switch recipient {
	case constant.SalesReportForSeller:
		return salesreportactivity.NewSeller()
	case constant.SalesReportForBusinessDevDept:
		return salesreportactivity.NewBusinessDev()
	case constant.SalesReportForFinanceDept:
		return salesreportactivity.NewFinance()
	case constant.SalesReportForInvestor:
		return salesreportactivity.NewInvestor()
	default:
		return nil
	}

}
```
Then pass it to `SalesReporter` constructor and execute it
```go
// Let's just pretend we get this recipient type from the higher caller in the call-stack
recipient := constant.SalesReportForInvestor
salesReportActivity := provide.SalesReporterActivity(recipient)

salesReporter := provide.SalesReporter()

err := salesReporter.ReportSales(salesReportActivity)
if err != nil {
    log.Println(err)
}
```

Usually, in real-world the SalesReport selection would
probably come from a drop-down selection from front-end or based on user's role.